---
sidebar: sidebar 
permalink: openshift/os-on-bm.html 
keywords: OpenShift, bare metal, IPI 
summary:  
---
= ベアメタル上の OpenShift
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
OpenShift on Bare Metal は、コモディティ サーバー上での OpenShift Container Platform の自動デプロイメントを提供します。

OpenShift on Bare Metal は OpenShift の仮想デプロイメントに似ており、コンテナ化の準備ができていないアプリケーションの仮想化ワークロードをサポートしながら、OpenShift クラスターのデプロイメント、迅速なプロビジョニング、スケーリングを容易にします。ベアメタルにデプロイすることで、OpenShift 環境に加えてホストハイパーバイザー環境を管理するために必要な余分なオーバーヘッドが不要になります。ベアメタル サーバーに直接デプロイすることで、ホストと OpenShift 環境間でリソースを共有する必要があることによる物理的なオーバーヘッドの制限も軽減できます。



== OpenShift on Bare Metal は次の機能を提供します。

* *IPI または支援インストーラーの導入* インストーラー プロビジョニング インフラストラクチャ (IPI) によってベアメタル サーバーに導入された OpenShift クラスターを使用すると、顧客はハイパーバイザー レイヤーを管理する必要なく、汎用性が高く、簡単に拡張できる OpenShift 環境をコモディティ サーバーに直接導入できます。
* *コンパクトなクラスター設計* ハードウェア要件を最小限に抑えるために、ベアメタル上の OpenShift では、OpenShift コントロール プレーン ノードがワーカー ノードやホスト コンテナーとしても機能できるようにすることで、ユーザーは 3 ノードのみのクラスターを展開できます。
* *OpenShift 仮想化* OpenShift は、OpenShift 仮想化を使用してコンテナー内で仮想マシンを実行できます。このコンテナネイティブ仮想化は、コンテナ内で KVM ハイパーバイザーを実行し、VM ストレージ用の永続ボリュームを接続します。
* *AI/ML に最適化されたインフラストラクチャ* GPU ベースのワーカー ノードを OpenShift 環境に組み込み、OpenShift Advanced Scheduling を活用することで、機械学習アプリケーション用の Kubeflow などのアプリケーションをデプロイします。




== ネットワーク設計

Red Hat OpenShift on NetAppソリューションは、2 つのデータ スイッチを使用して 25 Gbps でプライマリ データ接続を提供します。また、ストレージ ノードのインバンド管理と IPMI 機能のアウトオブバンド管理のために 1 Gbps の接続を提供する 2 つの管理スイッチも使用します。

OpenShift ベアメタル IPI デプロイメントでは、ネットワーク インターフェースが別個のネットワークに接続されている必要がある Red Hat Enterprise Linux 8 マシンであるプロビジョナー ノードを作成する必要があります。

* *プロビジョニング ネットワーク* このネットワークは、ベアメタル ノードを起動し、OpenShift クラスターをデプロイするために必要なイメージとパッケージをインストールするために使用されます。
* *ベアメタル ネットワーク* このネットワークは、クラスターがデプロイされた後の公開通信に使用されます。


プロビジョナー ノードをセットアップするために、顧客は、ノード自体と、展開目的でプロビジョニングされたブートストラップ VM 上でトラフィックが適切にルーティングされるようにするブリッジ インターフェイスを作成します。クラスターがデプロイされた後、API および Ingress VIP アドレスはブートストラップ ノードから新しくデプロイされたクラスターに移行されます。

次の画像は、IPI の展開中と展開が完了した後の環境を示しています。

image:redhat-openshift-036.png["入出力ダイアログまたは書かれたコンテンツを示す図"]

image:redhat-openshift-037.png["入出力ダイアログまたは書かれたコンテンツを示す図"]



=== VLANの要件

NetAppソリューションを使用した Red Hat OpenShift は、仮想ローカル エリア ネットワーク (VLAN) を使用して、さまざまな目的に合わせてネットワーク トラフィックを論理的に分離するように設計されています。

[cols="40%, 40%, 20%"]
|===
| VLAN | 目的 | VLAN ID 


| 帯域外管理ネットワーク | ベアメタルノードとIPMIの管理 | 16 


| ベアメタルネットワーク | クラスターが利用可能になった後の OpenShift サービス用のネットワーク | 181 


| プロビジョニングネットワーク | IPI 経由の PXE ブートおよびベアメタルノードのインストール用のネットワーク | 3485 
|===

NOTE: これらの各ネットワークは VLAN によって仮想的に分離されていますが、PXE ブート シーケンス中に VLAN タグを渡す方法がないため、各物理ポートはプライマリ VLAN が割り当てられたアクセス モードで設定する必要があります。



=== ネットワークインフラストラクチャサポートリソース

OpenShift コンテナ プラットフォームを展開する前に、次のインフラストラクチャを準備しておく必要があります。

* インバンド管理ネットワークと VM ネットワークからアクセス可能な完全なホスト名解決を提供する少なくとも 1 つの DNS サーバー。
* インバンド管理ネットワークと VM ネットワークからアクセス可能な NTP サーバーが少なくとも 1 つ。
* (オプション) インバンド管理ネットワークと VM ネットワークの両方に対する送信インターネット接続。

